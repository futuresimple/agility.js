// Generated by CoffeeScript 1.3.1
(function(){var a=[].slice,b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};this.Agility={},this.App={Controllers:{},Views:{}},Agility.Application=function(){function a(){this.router=new Agility.Router(this)}return a.name="Application",a.prototype.routes={},a.prototype.populateRoutes=function(){var a,b,c,d;c=this.routes,d=[];for(b in c)a=c[b],d.push(this.router.route(b,a));return d},a.prototype.run=function(){return this.populateRoutes(),this.init()},a.prototype.init=function(){return Backbone.history.start({pushState:!0,silent:!0}),Backbone.history.loadUrl()},a.prototype.$rootEl=function(){return $(this.root)},a}(),Agility.Controller=function(){function a(a){this.app=a}return a.name="Controller",a.prototype.view=function(a,b){return new App.Views[a](this.app,b)},a}(),Agility.Router=function(){function b(a){this.router=new Backbone.Router,this.app=a}return b.name="Router",b.prototype.route=function(b,c){var d=this;return this.router.route(b,c,function(){var b;return b=1<=arguments.length?a.call(arguments,0):[],d.dispatch(c,b)})},b.prototype.dispatch=function(a,b){var c,d,e,f;return f=a.split("#"),c=f[0],e=f[1],d=new App.Controllers[c](this.app),d[e].apply(d,b)},b}(),Agility.Template={templates:{},clearTemplates:function(){return this.templates={}},register:function(a,b){return Handlebars.templates[a]=Handlebars.compile(b)},find:function(a){return Handlebars.templates[a]},render:function(a,b,c){var d;d=this.find(a);if(d)return d(b,c);throw"Template "+a+" not found"}},Agility.View=function(b){function d(){var b,c;b=arguments[0],c=2<=arguments.length?a.call(arguments,1):[],this.app=b,d.__super__.constructor.apply(this,c)}return c(d,b),d.name="View",d.prototype.appRoot=function(){return this.app.$rootEl()},d.prototype.render=function(){var a,b;return a=_.extend({},this.options,this.extraContext()),b=Agility.Template.render(this.template,a),this.$el.html(b)},d}(Backbone.View)}).call(this);