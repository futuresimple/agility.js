// Generated by CoffeeScript 1.3.1
(function(){var a,b,c,d=[].slice,e={}.hasOwnProperty,f=function(a,b){function d(){this.constructor=a}for(var c in b)e.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};c=this,a={},b={Controllers:{},Collections:{},Views:{}},typeof exports!="undefined"&&exports!==null&&(exports.Agility=a,exports.App=b),a.Application=function(){function b(){this.router=new a.Router(this)}return b.name="Application",b.prototype.routes={},b.prototype.populateRoutes=function(){var a,b,c,d;c=this.routes,d=[];for(b in c)a=c[b],d.push(this.router.route(b,a));return d},b.prototype.run=function(){return this.populateRoutes(),this.init()},b.prototype.init=function(){return Backbone.history.start({pushState:!0,silent:!0}),Backbone.history.loadUrl()},b.prototype.$rootEl=function(){return $(this.root)},b}(),a.Controller=function(){function a(a){this.app=a}return a.name="Controller",a.prototype.view=function(a,c){var d;d=b.Views[a];if(d!=null)return new d(this.app,c);throw new Error("View "+a+" not found")},a}(),a.Router=function(){function a(a){this.router=new Backbone.Router,this.app=a}return a.name="Router",a.prototype.route=function(a,b){var c=this;return this.router.route(a,b,function(){var a;return a=1<=arguments.length?d.call(arguments,0):[],c.dispatch(b,a)})},a.prototype.dispatch=function(a,c){var d,e,f,g;return g=a.split("#"),d=g[0],f=g[1],e=new b.Controllers[d](this.app),e[f].apply(e,c)},a}(),a.Template={templates:{},clearTemplates:function(){return this.templates={}},register:function(a,b){return Handlebars.templates[a]=Handlebars.compile(b)},find:function(a){return Handlebars.templates[a]},render:function(a,b,c){var d;d=this.find(a);if(d)return d(b,c);throw new Error("Template "+a+" not found")}},a.View=function(b){function c(){var a,b;a=arguments[0],b=2<=arguments.length?d.call(arguments,1):[],this.app=a,c.__super__.constructor.apply(this,b)}return f(c,b),c.name="View",c.prototype.appRoot=function(){return this.app.$rootEl()},c.prototype.extraContext=function(){return{}},c.prototype.render=function(){var b,c;return b=_.extend({},this.options,this.extraContext()),c=a.Template.render(this.template,b),this.$el.html(c)},c}(Backbone.View)}).call(this);